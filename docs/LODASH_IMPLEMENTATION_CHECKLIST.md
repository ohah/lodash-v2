# 로대시 함수 구현 체크리스트

- **기준**: lodash 4.17.23
- **검증**: `bun run --filter=@lodash-v2/test test` (동등성 테스트) → 동등성 통과 후 Phase 2 진행

**진행 순서:**  
① **Phase 1** — 한 번에 한 함수씩 구현 → **함수 100% 구현**(동등성 테스트 전부 통과)까지 진행  
② **Phase 2** — 함수를 다 구현한 뒤, **한 함수씩** 벤치마크 테스트·점검

### 단계별 성공/실패 처리 규칙

아래 표는 **각 함수에 대해** 어떤 작업을 하고, 성공/실패 시 어떻게 이어서 진행할지 정리한 것입니다.

| 단계 | 작업 | 성공 시 | 실패 시 |
|------|------|---------|---------|
| 1 | 결과 동등성 테스트 (`bun run --filter=@lodash-v2/test test`) | 해당 함수가 모든 동등성 테스트를 통과하면, 표의 `구현 여부`를 `[ ]` → `[x]`로 바꾸고 **다음 함수**로 진행 | 테스트 실패 원인을 분석하고 `packages/core/src/*.ts` 구현 또는 테스트케이스를 수정한 뒤, **해결될 때까지 같은 테스트를 반복 실행**합니다. (3회 재시도 규칙 등은 `HEARTBEAT.md`를 따름) |
| 2 | 벤치마크 (`bun run benchmark`) 및 속도 점검 | `fastest`가 `ours`가 되면 Phase 2 체크리스트에서 해당 함수의 `fastest=ours`를 `[ ]` → `[x]`로 바꾸고 **다음 함수의 Phase 2**로 진행 | `fastest`가 `ours`가 아니면 구현(반복/할당/알고리즘) 또는 입력 데이터/케이스를 점검·수정한 뒤, **해결될 때까지 같은 벤치마크를 반복 실행**합니다. |

> 요약: **어떤 단계에서든 실패하면, 그 원인을 수정한 뒤 성공할 때까지 같은 단계를 반복 실행**하고, **성공한 뒤에만 다음 단계 또는 다음 함수로 이동**합니다.

---

## Phase 1: 함수 기능 그대로 구현하기

아래 순서대로 **lodash와 동일한 결과**가 나오도록 `packages/core/src/*.ts`에 **한 번에 한 함수씩** 구현합니다.  
한 함수 구현 후 해당 describe 블록만 통과하는지 확인하고, **전부 통과(100% 구현)**하면 Phase 2로 넘어갑니다.

**테스트코드:** 구현하는 도중 **필요한 테스트/케이스**가 보이면 (`result-equivalence.test.ts` 또는 `packages/core/src/__tests__/` 등) **계속 추가하면서 진행**하세요. 케이스 추가 후 해당 함수 동등성은 그대로 유지할 것.

### Array (`array.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 1 | `chunk` | size 2, size 3, size 1 | [x] |
| 2 | `compact` | falsy 제거, 빈 배열 | [x] |
| 3 | `concat` | 배열+값, 빈 배열 | [x] |
| 4 | `difference` | 기본, 중복 제외 | [x] |
| 5 | `drop` | n=1, n=2 | [x] |
| 6 | `dropRight` | n=1, n=2 | [x] |
| 7 | `take` | n=2, n=0 | [x] |
| 8 | `flatten` | 1단계 | [x] |
| 9 | `head` | 일반, 빈 배열 | [x] |
| 10 | `last` | 일반, 빈 배열 | [x] |
| 11 | `initial` | 일반 | [x] |
| 12 | `tail` | 일반 | [x] |
| 13 | `uniq` | 중복 제거, 빈 배열 | [x] |
| 14 | `without` | 기본 | [x] |
| 15 | `fromPairs` | 기본 | [x] |

### Collection (`collection.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 16 | `map` | x2, 빈 배열 | [x] |
| 17 | `filter` | 짝수, 빈 배열 | [x] |
| 18 | `reduce` | 합, 빈 배열 | [x] |
| 19 | `find` | a===2 | [x] |
| 20 | `keyBy` | id 기준 | [x] |
| 21 | `groupBy` | 짝홀 | [x] |
| 22 | `sortBy` | 음수로 역순 | [x] |
| 23 | `countBy` | 길이 | [x] |
| 24 | `every` | 전부 참, 하나 거짓 | [x] |
| 25 | `some` | 하나 참, 전부 거짓 | [x] |
| 26 | `includes` | 있음, 없음 | [x] |

### Lang (`lang.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 27 | `isArray` | 배열, 객체, null | [x] |
| 28 | `isNumber` | 숫자, 문자열, NaN | [ ] |
| 29 | `isEmpty` | 빈 배열, 빈 객체, 요소 있음 | [ ] |
| 30 | `toArray` | 객체, 문자열 | [x] |
| 31 | `cloneDeep` | 중첩 객체 | [ ] |

### Math (`math.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 32 | `sum` | 기본, 빈 배열 | [ ] |
| 33 | `max` | 기본, 빈 배열 | [ ] |
| 34 | `min` | 기본, 빈 배열 | [ ] |
| 35 | `mean` | 기본, 빈 배열 | [ ] |

### Number (`number.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 36 | `clamp` | 범위 내/밑/위 | [ ] |
| 37 | `inRange` | 구간 내/밖, 2인자 | [ ] |

### Object (`object.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 38 | `get` | 중첩, 기본값 | [ ] |
| 39 | `pick` | a,c | [ ] |
| 40 | `omit` | b 제외 | [ ] |
| 41 | `keys` | 기본 | [ ] |
| 42 | `values` | 기본 | [ ] |

### String (`string.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 43 | `camelCase` | 공백, 하이픈 | [ ] |
| 44 | `trim` | 기본, chars | [ ] |

### Util (`util.ts`)

| # | 함수 | 결과 동등성 테스트 케이스 | 구현 여부 |
|---|------|---------------------------|-----------|
| 45 | `identity` | 숫자, 0 | [ ] |
| 46 | `range` | 0~3, 1~4, step 2 | [ ] |

---

## Phase 1 완료 조건

- [ ] `bun run --filter=@lodash-v2/test test` (동등성 테스트) **전부 통과**
- [ ] 위 표의 구현 여부 전부 체크

---

## Phase 2: 함수별 점검 및 속도 비교

Phase 1이 모두 통과한 뒤, **함수 하나씩** 아래 순서로 점검합니다.

1. 해당 함수 **동등성** 유지 확인 (테스트 통과)
2. `bun run benchmark` 로 **속도 측정**
3. `fastest`가 `ours`인지 확인; 아니면 구현(반복/할당/알고리즘) 점검 후 재측정
4. `bun run generate-feedback` 로 피드백 보고서 갱신

### 함수별 Phase 2 체크리스트 (동일 순서)

| # | 함수 | 동등성 통과 | fastest=ours | 비고 |
|---|------|-------------|--------------|------|
| 1 | chunk | [ ] | [ ] | |
| 2 | compact | [ ] | [ ] | |
| 3 | concat | [ ] | [ ] | |
| 4 | difference | [ ] | [ ] | |
| 5 | drop | [ ] | [ ] | |
| 6 | dropRight | [ ] | [ ] | |
| 7 | take | [ ] | [ ] | |
| 8 | flatten | [ ] | [ ] | |
| 9 | head | [ ] | [ ] | |
| 10 | last | [ ] | [ ] | |
| 11 | initial | [ ] | [ ] | |
| 12 | tail | [ ] | [ ] | |
| 13 | uniq | [ ] | [ ] | |
| 14 | without | [ ] | [ ] | |
| 15 | fromPairs | [ ] | [ ] | |
| 16 | map | [ ] | [ ] | |
| 17 | filter | [ ] | [ ] | |
| 18 | reduce | [ ] | [ ] | |
| 19 | find | [ ] | [ ] | |
| 20 | keyBy | id 기준 | [x] |
| 21 | groupBy | [ ] | [ ] | |
| 22 | sortBy | [ ] | [ ] | |
| 23 | countBy | [ ] | [ ] | |
| 24 | every | [ ] | [ ] | |
| 25 | some | [ ] | [ ] | |
| 26 | includes | [ ] | [ ] | |
| 27 | isArray | [ ] | [ ] | |
| 28 | isNumber | [ ] | [ ] | |
| 29 | isEmpty | [ ] | [ ] | |
| 30 | toArray | [ ] | [ ] | |
| 31 | cloneDeep | [ ] | [ ] | |
| 32 | sum | [ ] | [ ] | |
| 33 | max | [ ] | [ ] | |
| 34 | min | [ ] | [ ] | |
| 35 | mean | [ ] | [ ] | |
| 36 | clamp | [ ] | [ ] | |
| 37 | inRange | [ ] | [ ] | |
| 38 | get | [ ] | [ ] | |
| 39 | pick | [ ] | [ ] | |
| 40 | omit | [ ] | [ ] | |
| 41 | keys | [ ] | [ ] | |
| 42 | values | [ ] | [ ] | |
| 43 | camelCase | [ ] | [ ] | |
| 44 | trim | [ ] | [ ] | |
| 45 | identity | [ ] | [ ] | |
| 46 | range | [ ] | [ ] | |

---

## 참고 명령어

```bash
# 결과 동등성만
bun run --filter=@lodash-v2/test test

# 벤치마크만
bun run benchmark

# 피드백 보고서 생성
bun run generate-feedback
```

해석 방법: `docs/BENCHMARK_AND_RESULT_FEEDBACK.md`
