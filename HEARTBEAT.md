# Heartbeat — Phase 1 동등성

이 파일을 읽고 **매 턴** 아래를 순서대로 처리하세요.

- **대상**: lodash-v2 워크스페이스. 체크·작업은 레포 루트 기준으로 실행합니다.
- **목표**: **Phase 1** — 결과 동등성 테스트가 전부 통과할 때까지, 미구현 함수를 하나씩 구현합니다.

---

## 에러 시 재시도

- 어떤 단계에서 에러가 나면 **같은 작업을 최대 3번까지 재시도**하세요.
- **3번 재시도 후에도 동일한 에러**면: 사용자에게 알리고, 이번 턴은 해당 단계 실패로 종료합니다.
- **다음 턴**: 실패한 작업을 **먼저** 재실행한 뒤, 성공하면 아래 체크리스트를 이어서 진행합니다.

---

## 매 턴 체크리스트 (Phase 1 — 동등성만)

**사전 조건**

- 이전 턴에서 **미커밋 변경이 없도록** 하세요. `git status`로 확인하고, 있으면 먼저 `docs/COMMIT.md` 규칙에 맞게 **add → commit → (필요 시) push** 한 뒤 아래를 진행합니다.

**1. 결과 동등성 테스트**

- `bun run --filter=@lodash-v2/test test` (또는 `bun test test/src/__tests__/result-equivalence.test.ts`)
- **실패가 있으면** 같은 턴에서 `packages/core/src/*.ts` 해당 함수를 수정한 뒤 재테스트. 통과할 때까지(또는 3회 재시도 후) 수정·재실행합니다.
- 필요한 테스트/케이스가 보이면 `result-equivalence.test.ts` 등에 추가하면서 진행해도 됩니다.

**2. 구현 체크리스트에서 다음 할 일 한 항목 진행**

- `docs/LODASH_IMPLEMENTATION_CHECKLIST.md`가 있으면 열어 **Phase 1**에서 구현 여부가 `[ ]`인 함수 중 **맨 위 하나**를 골라 lodash와 동일하게 구현합니다.
- 해당 함수의 동등성 테스트가 통과하면, 체크리스트에서 그 함수의 `[ ]`를 `[x]`로 갱신합니다.
- Phase 1 표의 `[ ]`가 모두 `[x]`가 되면 Phase 1 완료입니다.

**3. 변경 분 커밋 + 푸시 (변경이 있을 때)**

- 이번 턴에 파일 변경이 하나라도 있으면, `git status`로 확인한 뒤 **같은 턴 안에** 커밋 + 푸시까지 실행하세요.
- 커밋 메시지는 `docs/COMMIT.md` 규칙을 따릅니다 (예: `feat: 함수명 구현`).
- 가능하면 `scripts/commit-and-push.sh "메시지"` 로 한 번에 처리합니다.

**4. 인수인계 문서 갱신 (해당 시)**

- `docs/HEARTBEAT_HANDOFF.md` 같은 인수인계 문서에 적힌 작업이 끝나면, **현재 상태에 맞게** 해당 문서를 업데이트하세요 (현재 상태 요약, 다음 작업 등).

---

## 참고 문서

- **구현/체크리스트**: `docs/LODASH_IMPLEMENTATION_CHECKLIST.md` (있을 경우)
- **커밋 규칙**: `docs/COMMIT.md`
- **동등성 실패 해석**: `docs/BENCHMARK_AND_RESULT_FEEDBACK.md` § 결과 동등성 부분
- **실패 목록 보고서**: `bun run generate-feedback` 후 `docs/feedback-report.md` (동등성 실패 요약만 사용)

---

응답 보내기 전: [ ] 결과 동등성 테스트 [ ] 구현 체크리스트 다음 할 일 한 항목 진행 [ ] 필요 시 커밋·푸시 [ ] 인수인계 문서 갱신(해당 시)

위를 모두 했을 때만 `HEARTBEAT_OK` 또는 이번 턴 요약을 보내세요.
